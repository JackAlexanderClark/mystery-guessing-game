<!-- opening page with rules and instructions before a link to the main game page -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <!-- Credit and source from Getbootstrap-->
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.101.0">
    <title>Rules</title>
    
    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet" type="text/css">
    <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/album/">
    <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/product/">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <!-- Custom golden question mark as favicon for browser -->
    <link rel="icon" type="image/x-icon" href="assets/images/golden question mark logo.jpg" alt="mystery logo favicon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

    <!-- Bootstrap core CSS -->
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- jquery CDN links -->
    <script src="jquery-3.6.1.min.js" defer></script>
    <script src="assets/js/effects.js" defer></script>
    <script src="assets/js/localstorage.js" defer></script>
    <script src="assets/js/effects.js" type="module" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>

        .addButtonColour {
            color: white;
            background-color: green;
            cursor: hand;
        }

        .removeButtonColour {
            color: whitesmoke;
            background-color: red;
            cursor: not-allowed;
        }

        p, li, h1, h2, h3, .img-text, button {
            font-family: "Bookman Old Style", Georgia, serif;
            color:rgb(194, 191, 191);
        } 

        h1 {
            text-decoration: underline;
        }

        /* Adding a border to all image tags, except the nav logo using :not css selector */
        img:not(.weblogo) {
            border: 2px solid rgb(194, 191, 191);
        }

        .navbar {
          overflow: hidden;
        }

        /* Navbar links */
        .navbar a {
          float: left;
          display: block;
          text-align: center;
          padding: 14px;
          text-decoration: none;
        }

        /* Page content */
        .content {
          padding: 16px;
        }

        /* The sticky class is added to the navbar with JS when it reaches its scroll position */
        .sticky {
          position: fixed;
          top: 0;
          width: 100%;
        }

        /* Add some top padding to the page content to prevent sudden quick movement (as the navigation bar gets a new position at the top of the page (position:fixed and top:0) */
        .sticky + .content {
          padding-top: 60px;
        }

        /* end of w3schools code */

      /* Credit and Source to GetBootstrap: https://getbootstrap.com/docs/4.6/examples/album/" */
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }



    .heading-style {
      font-weight: bold;
      font-style: italic;
    }

    li, ol {
        font-style: italic;
        text-align: left;
        font-family:'Times New Roman', Times, serif;
        color:rgb(194, 191, 191);
    }

    button {
        color:black;
    }

    img {
        cursor: hand;
    }

      /* chat css styling for tooltip */
      .tooltip{
          position: absolute;
          background-color: #eee;
          padding: 5px;
          border-radius: 3px;
          display: none;
      }
    </style>


    </head>
<body background="assets/images/black-board background.jpg">
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><img src="assets/images/golden question mark logo.jpg" alt="game logo" height="40px" width="40px"></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="index.html" style="color:yellow;">Rules&nbsp;<i class="fas fa-book"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="gamepage.html" style="color:yellow;">Characters&nbsp;<i class="fa-solid fa-person"></i></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="clues.html" style="color:yellow;">Clues&nbsp;<i class="fa-solid fa-magnifying-glass"></i></a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    <!-- localstorage save user details on first visit -->

      <hr>

    <!-- Introduction panel with rundown of the game rules for newcomers -->
    <section id="rulebook">
        <div class="container">
            <section id="localstorage">
                <div class="container-fluid">
                    <fieldset>
                    <div class="row">
                      <div>
                        <h1>Mystery Guessing Game!</h1>
                      </div>
                        <legend ><b>What is your name and username?</b></legend>
                        <div class="col-md-6">
                            <span style="float:left;"><small>Your session username must be a minimum of 4 characters and a maximum of 12 characters.</small></span>
                        </div>
                        <div class="col-md-6">
                            <input id="inputkey" type="text" placeholder="Enter Username..." maxlength="12" onkeyup="checkUserInput();"/>
                            <input id="inputvalue" type="password" placeholder="Enter Password..." maxlength="12" onkeyup="checkUserInput();"/>
                            <button style="float:right;" type="button" class="removeButtonColour" id="buttonSubmit" disabled="disabled">Submit User Information</button>
                            <div id="tooltip">
                            </div>
                        </div>
                    </div>
                    </fieldset>
                    <fieldset>
                        <legend>Local Storage Output</legend>
                        <div> Your username is:
                            <div id="isOutput"></div>
                        </div>
                    </fieldset>
                    <p>Wish to reset local storage?</p>
                    <button id="clear-button">Clear Local Storage</button>
                </div>
            </section>
            <hr>
            <h1>Rules</h1>
            <p>Who has the motive? Can you solve this case?</p> 
            <ol style="text-align:center;">
                <li>Choose a session username and then read the case files on each characters and assess the evidence.</li>
                <li>There are nine suspects for you to chose from.</li>
                <li>You have 10 minutes to read the evidence and clues.</li>
                <li>You are allowed 2 guesses to chose from. Your guesses are counted and once you reach two you lose and must restart the game.</li>
            </ol>
            <hr>
            <!-- Biography and Story context for game-->
            <h1>The Story</h1>
            <ol style="text-align:center;">
                <li>You are a police detective, investigating an arson attack.</li>
                <li>Waterhope is a quiet and idyllic town in the English countryside.</li>
                <li>At 2:35am a phone call reported a loud explosion.</li>
                <li>Nick Draper is the home-owner, he is a 43 year old ex-Head Teacher at Water Hope High School.</li>
                <li>In the last few years, Nick has left teaching and have become a property investor for local developments in Waterhope.</li>
                <li>He was a local figure of much ire from the community.</li>
            </ol>
            <img src="assets/images/house on fire .jpg" class="img-fluid img-thumbnail" alt="Arson Attack on the house" style="max-width: 50%; max-height: 50%;">
            <hr>
            <h1>Submit your Guess</h1>
            <p>Once you are satisfied with your investigation, please submit below.</p>
            <img src="assets/images/Police station.jpg" class="img-fluid img-thumbnail" alt="Police Station" style="max-width: 50%; max-height: 50%;">
            <hr>
            <h3>Choose your character.</h3>
            <input type="text" id="guess-input" placeholder="Enter your guess" maxlength="1">
            <br>
            <button onclick="checkGuess()" id="submitButton">Submit</button>
            <p id="result"></p>
            <p id="guesses"></p>
            <!-- display amount of guesses -->
            <div id="display"></div>
            <br>
            <!-- game over text if game lost-->
            <div id="gameOver"></div>
            <!-- Explanation -->
            <div id="explanation"></div>
            <!-- link to solution -->
            <div id="solution"></div>
            <br>

            <footer>
              <div class="container">
                  <div style="text-align:center; font-family: 'Times New Roman', Times, serif;">
                      <div class="centered">
                          <!-- css anchor tag to return to top of page for easier navigation -->
                          <a href="#header-anchor"><p style="text-align:center;"> Click here to return to top of the page</p></a>
                      </div>
                  </div>
              </div>
              </footer>

        </div>
    </section>

        <!-- CDN links and bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://kit.fontawesome.com/df070f2a43.js" crossorigin="anonymous"></script>

        <script>

        // check broswer storage type, check if the browser supports local storage, if not then clear local storage 
        if(typeof(Storage) !== "undefined") {
            document.getElementById("clear-button").addEventListener("click", function() {
                localStorage.clear();
                document.getElementById("isOutput").innerHTML = "";
            });
        }

        // clear local storage and the inner html
        document.getElementById("clear-button").addEventListener("click", function() {
            localStorage.clear();
            document.getElementById("isOutput").innerHTML = "";
        });

        // chat tooltip for input submission
        $(document).ready(function() {
            $('#guess-input').hover(function() {
                $(this).after('<span class="tooltip">Please use the number corresponding to the character.</span>');
                }, function() {
            $(this).next().remove();
            });
        });

      function disableSubmit() {
          console.log("disable");
          count = 2;
          $("#submit-button").click(function() {
              $(this).prop("disabled", true).removeClass("removeButtonColour").addClass("addButtonColour");
            });
          document.getElementById("guess-input").disabled;
      }

      function createSolutionLink() {
        document.getElementById("solution").innerHTML = `
          <a href="https://jackalexanderclark.github.io/mystery-guessing-game/solution.html">
            Click here for the solution
          </a>
        `;
      }

      let count = 0;
      const display = document.getElementById("display");
      const storageDisplay = document.getElementById("storageDisplay");
    
      function Guesses() {
        count++;
        display.innerHTML = "Guesses:&nbsp;" + count;
        localStorage.setItem("count", count);
      }

      let correctNumber = 4;      // character 4

      function checkGuess() {
        let guess = document.getElementById("guess-input").value;
        let result = document.getElementById("result");
        let explanation = document.getElementById("explanation");
        let solutionLink = document.getElementById("solution");
        if (guess == correctNumber && count < 3) {
          result.innerHTML = "Congratulations! You guessed the correct character and have solved the case!!!";
          explanation.innerHTML = "<strong>Explanation: </strong><em>The reason for Mark Henderson was the unpaid loan.</em>\n" + "<em>To solve it took you: </em>" + (count + 1) + " <em>guess(es)</em>";
          createSolutionLink();
        } else {
          result.innerHTML = "Sorry, that's not the correct number. Please try again.";
          Guesses();
        }

        let gameOverDiv = document.getElementById("gameOver");
        if ( count === 3 ) {
          console.log("game over");
          gameOverDiv.innerHTML = "You have used up 3 guesses and have lost the game as you have not correctly identified the suspect";
          disableSubmit();
        }

        return;
      }
      
      // need to make sure can't type in 4 after 3 guesses



    </script>
</body>
</html>